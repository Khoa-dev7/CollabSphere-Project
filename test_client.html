<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Test Chat CollabSphere</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js"></script>
    <style>
        body { font-family: sans-serif; padding: 20px; }
        #messages { list-style-type: none; margin: 0; padding: 0; }
        #messages li { padding: 5px 10px; margin-bottom: 5px; background: #eee; border-radius: 5px; }
        form { margin-top: 20px; }
        input { padding: 10px; width: 300px; }
        button { padding: 10px 20px; background: blue; color: white; border: none; cursor: pointer; }
    </style>
</head>
<body>
    <h2>ğŸš€ Test Chat Realtime</h2>
    <p>Tráº¡ng thÃ¡i: <span id="status" style="color:red">Äang káº¿t ná»‘i...</span></p>
    
    <ul id="messages"></ul>

    <form id="form" action="">
        <input id="input" autocomplete="off" placeholder="Nháº­p tin nháº¯n..." /><button>Gá»­i</button>
    </form>

    <script>
        // 1. Káº¿t ná»‘i Ä‘áº¿n Server Python cá»§a báº¡n (cá»•ng 5000)
        var socket = io('http://localhost:5000');

        var statusLabel = document.getElementById('status');
        var messages = document.getElementById('messages');
        var form = document.getElementById('form');
        var input = document.getElementById('input');

        // Khi káº¿t ná»‘i thÃ nh cÃ´ng
        socket.on('connect', function() {
            statusLabel.innerText = "âœ… ÄÃ£ káº¿t ná»‘i thÃ nh cÃ´ng!";
            statusLabel.style.color = "green";
            console.log("Connected to server");
        });

        // Khi nháº­n Ä‘Æ°á»£c tin nháº¯n tá»« Server (do ngÆ°á»i khÃ¡c gá»­i)
        socket.on('receive_message', function(msg) {
            var item = document.createElement('li');
            item.textContent = "ğŸ“© " + msg;
            messages.appendChild(item);
            window.scrollTo(0, document.body.scrollHeight);
        });

        // Gá»­i tin nháº¯n Ä‘i
        form.addEventListener('submit', function(e) {
            e.preventDefault();
            if (input.value) {
                // Gá»­i sá»± kiá»‡n 'chat_message' lÃªn server
                socket.emit('chat_message', input.value);
                input.value = '';
            }
        });
    </script>
</body>
</html>